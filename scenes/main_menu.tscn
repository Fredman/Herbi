[gd_scene load_steps=20 format=1]

[ext_resource path="res://scripts/main_menu.gd" type="Script" id=1]
[ext_resource path="res://graphics/backgrounds/fallback.jpg" type="Texture" id=2]
[ext_resource path="res://graphics/hud/bg.png" type="Texture" id=3]
[ext_resource path="res://fonts/cave_story_32.fnt" type="BitmapFont" id=4]
[ext_resource path="res://graphics/hud/music_button.png" type="Texture" id=5]
[ext_resource path="res://graphics/hud/music_button_false.png" type="Texture" id=6]
[ext_resource path="res://graphics/hud/button.png" type="Texture" id=7]
[ext_resource path="res://graphics/hud/button_pressed.png" type="Texture" id=8]
[ext_resource path="res://graphics/hud/square.png" type="Texture" id=9]

[sub_resource type="Animation" id=1]

length = 0.5
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../fade:modulate")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0, 0.5 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ Color( 1, 1, 1, 0 ), Color( 0, 0, 0, 1 ) ] }

[sub_resource type="Animation" id=2]

length = 0.5
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../fade:modulate")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0, 0.5 ), "transitions":FloatArray( 4, 1 ), "update":0, "values":[ Color( 0, 0, 0, 1 ), Color( 1, 1, 1, 0 ) ] }

[sub_resource type="Animation" id=3]

length = 4.0
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../logos/logo1:transform/pos")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0, 4 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ Vector2( -100, -100 ), Vector2( 0, 0 ) ] }
tracks/1/type = "value"
tracks/1/path = NodePath("../logos/logo1:transform/rot")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = { "times":FloatArray( 0, 4 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ 0.0, 0.0 ] }

[sub_resource type="Animation" id=4]

length = 5.0
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../logos/logo2:transform/pos")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0, 5 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ Vector2( 420, -100 ), Vector2( 320, 0 ) ] }
tracks/1/type = "value"
tracks/1/path = NodePath("../logos/logo2:transform/rot")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = { "times":FloatArray( 0, 5 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ 0.0, 0.0 ] }

[sub_resource type="Animation" id=5]

length = 7.0
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../logos/logo3:transform/pos")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0, 7 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ Vector2( 160, -100 ), Vector2( 160, 0 ) ] }
tracks/1/type = "value"
tracks/1/path = NodePath("../logos/logo3:transform/rot")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = { "times":FloatArray( 0, 7 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ 0.0, 0.0 ] }

[sub_resource type="Animation" id=6]

resource/name = "hide"
length = 0.2
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../Buttons/play:disabled")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/1/type = "value"
tracks/1/path = NodePath("../Buttons/credits:disabled")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/2/type = "value"
tracks/2/path = NodePath("../Buttons/exit:disabled")
tracks/2/interp = 1
tracks/2/imported = false
tracks/2/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/3/type = "value"
tracks/3/path = NodePath("../Buttons/leave:disabled")
tracks/3/interp = 1
tracks/3/imported = false
tracks/3/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/4/type = "value"
tracks/4/path = NodePath("../Buttons/play:visibility/visible")
tracks/4/interp = 1
tracks/4/imported = false
tracks/4/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/5/type = "value"
tracks/5/path = NodePath("../Buttons/credits:visibility/visible")
tracks/5/interp = 1
tracks/5/imported = false
tracks/5/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/6/type = "value"
tracks/6/path = NodePath("../Buttons/exit:visibility/visible")
tracks/6/interp = 1
tracks/6/imported = false
tracks/6/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/7/type = "value"
tracks/7/path = NodePath("../Buttons/leave:visibility/visible")
tracks/7/interp = 1
tracks/7/imported = false
tracks/7/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/8/type = "value"
tracks/8/path = NodePath("../Labels/keys:visibility/visible")
tracks/8/interp = 1
tracks/8/imported = false
tracks/8/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/9/type = "value"
tracks/9/path = NodePath("../Labels/credits:visibility/visible")
tracks/9/interp = 1
tracks/9/imported = false
tracks/9/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }

[sub_resource type="Animation" id=7]

resource/name = "show"
length = 0.2
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("../Buttons/play:disabled")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/1/type = "value"
tracks/1/path = NodePath("../Buttons/credits:disabled")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/2/type = "value"
tracks/2/path = NodePath("../Buttons/exit:disabled")
tracks/2/interp = 1
tracks/2/imported = false
tracks/2/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/3/type = "value"
tracks/3/path = NodePath("../Buttons/leave:disabled")
tracks/3/interp = 1
tracks/3/imported = false
tracks/3/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/4/type = "value"
tracks/4/path = NodePath("../Buttons/play:visibility/visible")
tracks/4/interp = 1
tracks/4/imported = false
tracks/4/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/5/type = "value"
tracks/5/path = NodePath("../Buttons/credits:visibility/visible")
tracks/5/interp = 1
tracks/5/imported = false
tracks/5/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/6/type = "value"
tracks/6/path = NodePath("../Buttons/exit:visibility/visible")
tracks/6/interp = 1
tracks/6/imported = false
tracks/6/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/7/type = "value"
tracks/7/path = NodePath("../Buttons/leave:visibility/visible")
tracks/7/interp = 1
tracks/7/imported = false
tracks/7/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }
tracks/8/type = "value"
tracks/8/path = NodePath("../Labels/keys:visibility/visible")
tracks/8/interp = 1
tracks/8/imported = false
tracks/8/keys = { "times":FloatArray( 0 ), "transitions":FloatArray( 1 ), "update":1, "values":[ false ] }
tracks/9/type = "value"
tracks/9/path = NodePath("../Labels/credits:visibility/visible")
tracks/9/interp = 1
tracks/9/imported = false
tracks/9/keys = { "times":FloatArray( 0.2 ), "transitions":FloatArray( 1 ), "update":1, "values":[ true ] }

[sub_resource type="StyleBoxEmpty" id=8]

content_margin/left = -1.0
content_margin/right = -1.0
content_margin/top = -1.0
content_margin/bottom = -1.0

[sub_resource type="StyleBoxTexture" id=9]

content_margin/left = -1.0
content_margin/right = -1.0
content_margin/top = -1.0
content_margin/bottom = -1.0
texture = ExtResource( 7 )
margin/left = 0.0
margin/right = 0.0
margin/top = 0.0
margin/bottom = 0.0
expand_margin/left = 0.0
expand_margin/right = 0.0
expand_margin/top = 0.0
expand_margin/bottom = 0.0
draw_center = true

[sub_resource type="StyleBoxTexture" id=10]

content_margin/left = -1.0
content_margin/right = -1.0
content_margin/top = -1.0
content_margin/bottom = -1.0
texture = ExtResource( 8 )
margin/left = 0.0
margin/right = 0.0
margin/top = 0.0
margin/bottom = 0.0
expand_margin/left = 0.0
expand_margin/right = 0.0
expand_margin/top = 0.0
expand_margin/bottom = 0.0
draw_center = true

[node name="menu" type="Node2D"]

script/script = ExtResource( 1 )
__meta__ = { "__editor_plugin_screen__":"Script" }

[node name="bg" type="Sprite" parent="."]

texture = ExtResource( 2 )
centered = false

[node name="logos" type="Node2D" parent="."]

editor/display_folded = true

[node name="logo" type="Sprite" parent="logos"]

transform/pos = Vector2( 160, 30 )
texture = ExtResource( 3 )

[node name="logo1" type="Sprite" parent="logos"]

transform/pos = Vector2( -100, -100 )
texture = ExtResource( 3 )
modulate = Color( 1, 1, 1, 0.588235 )

[node name="logo2" type="Sprite" parent="logos"]

transform/pos = Vector2( 420, -100 )
texture = ExtResource( 3 )
modulate = Color( 1, 1, 1, 0.588235 )

[node name="logo3" type="Sprite" parent="logos"]

transform/pos = Vector2( 160, -100 )
texture = ExtResource( 3 )
modulate = Color( 1, 1, 1, 0.588235 )

[node name="Labels" type="Control" parent="."]

focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 40.0
margin/bottom = 40.0

[node name="version" type="Label" parent="Labels"]

rect/rotation = 25.0
rect/scale = Vector2( 0.5, 0.5 )
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 190.0
margin/top = 65.0
margin/right = 366.0
margin/bottom = 84.0
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 0.862745, 0.784314, 0.784314, 1 )
custom_colors/font_color_shadow = Color( 0.196078, 0.196078, 0.196078, 1 )
text = "version number"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="keys" type="Label" parent="Labels"]

rect/scale = Vector2( 0.5, 0.5 )
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 100.0
margin/top = 63.0
margin/right = 340.0
margin/bottom = 170.0
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 0.196078, 0.196078, 0.196078, 1 )
custom_colors/font_color_shadow = Color( 0.588235, 0.588235, 0.588235, 1 )
text = "SPACE = Jump\nX = Throw Apple\nESCAPE = Main Menu\nF2 = Restart Level\nF3 = Enable music"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="credits" type="Label" parent="Labels"]

visibility/visible = false
rect/scale = Vector2( 0.5, 0.5 )
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 10.0
margin/top = 53.0
margin/right = 610.0
margin/bottom = 336.0
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 0.196078, 0.196078, 0.196078, 1 )
custom_colors/font_color_shadow = Color( 0.588235, 0.588235, 0.588235, 1 )
text = "Coded by KOBUGE-Games, from an idea of @alketii\nLevels by @bojidar-bg and @ObaniGemini\nGamepad input support by @Hinsbart\nGame logic by @alketii, @bojidar-bg and @ObaniGemini\n\nMost of the graphics come from SpriteLib\n( http://www.widgetworx.com/projects/sl.html )\n\nFor more, visit http://kobuge-games.github.io/Herbi\n\nKOBGUE-GAMES | GodotEngine.org"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="debug_info" type="Label" parent="Labels"]

visibility/visible = false
rect/scale = Vector2( 0.4, 0.4 )
focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 2.0
margin/top = 0.0
margin/right = 237.0
margin/bottom = 167.0
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 0.879765, 0.763726, 0, 0.590196 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 0.409804 )
text = "\\\\\\ DEBUG MODE ///\nT = Load level_0.tscn\nD = Next Level\nA = Previous Level\nW = +1 Life\nS = -1 Life\nQ = +1 apple\nE = +1 diamond"
align = 1
valign = 1
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1

[node name="Anims" type="Node" parent="."]

editor/display_folded = true

[node name="Enter" type="AnimationPlayer" parent="Anims"]

playback/process_mode = 1
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/enter = SubResource( 1 )
anims/start = SubResource( 2 )
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = "start"

[node name="Falling1" type="AnimationPlayer" parent="Anims"]

playback/process_mode = 1
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/falling = SubResource( 3 )
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = ""

[node name="Falling2" type="AnimationPlayer" parent="Anims"]

playback/process_mode = 1
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/falling = SubResource( 4 )
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = ""

[node name="Falling3" type="AnimationPlayer" parent="Anims"]

playback/process_mode = 1
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/falling = SubResource( 5 )
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = ""

[node name="Credits" type="AnimationPlayer" parent="Anims"]

playback/process_mode = 1
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/hide = SubResource( 6 )
anims/show = SubResource( 7 )
next/hide = ""
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = ""

[node name="Buttons" type="Control" parent="."]

focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 0.0
margin/right = 40.0
margin/bottom = 40.0

[node name="music" type="CheckBox" parent="Buttons"]

focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 270.0
margin/top = 19.0
margin/right = 296.0
margin/bottom = 42.0
custom_icons/checked = ExtResource( 5 )
custom_icons/unchecked = ExtResource( 6 )
custom_styles/pressed = SubResource( 8 )
toggle_mode = true
enabled_focus_mode = 2
shortcut = null
flat = true
align = 0

[node name="play" type="Button" parent="Buttons"]

rect/min_size = Vector2( 160, 40 )
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
size_flags/stretch_ratio = 0.0
margin/left = 80.0
margin/top = 126.0
margin/right = 240.0
margin/bottom = 166.0
custom_styles/hover = SubResource( 9 )
custom_styles/pressed = SubResource( 10 )
custom_styles/disabled = SubResource( 9 )
custom_styles/normal = SubResource( 9 )
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color_disabled = Color( 0.784314, 0.784314, 0.784314, 1 )
custom_colors/font_color = Color( 0.784314, 0.784314, 0.784314, 1 )
custom_colors/font_color_pressed = Color( 0.588235, 0.588235, 0.588235, 1 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "Play"
flat = false

[node name="credits" type="Button" parent="Buttons"]

rect/min_size = Vector2( 160, 40 )
rect/scale = Vector2( 0.6, 0.6 )
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
size_flags/stretch_ratio = 0.0
margin/left = 60.0
margin/top = 170.0
margin/right = 220.0
margin/bottom = 210.0
custom_styles/hover = SubResource( 9 )
custom_styles/pressed = SubResource( 10 )
custom_styles/disabled = SubResource( 9 )
custom_styles/normal = SubResource( 9 )
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 0.784314, 0.784314, 0.784314, 1 )
custom_colors/font_color_pressed = Color( 0.588235, 0.588235, 0.588235, 1 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "Credits"
flat = false

[node name="exit" type="Button" parent="Buttons"]

rect/min_size = Vector2( 160, 40 )
rect/scale = Vector2( 0.6, 0.6 )
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
size_flags/stretch_ratio = 0.0
margin/left = 160.0
margin/top = 170.0
margin/right = 320.0
margin/bottom = 210.0
custom_styles/hover = SubResource( 9 )
custom_styles/pressed = SubResource( 10 )
custom_styles/disabled = SubResource( 9 )
custom_styles/normal = SubResource( 9 )
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color = Color( 1, 0.156863, 0.117647, 1 )
custom_colors/font_color_hover = Color( 1, 0.313726, 0.313726, 1 )
custom_colors/font_color_pressed = Color( 0.588235, 0.196078, 0.196078, 1 )
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "Exit"
flat = false

[node name="leave" type="Button" parent="Buttons"]

visibility/visible = false
rect/min_size = Vector2( 160, 40 )
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
size_flags/stretch_ratio = 0.0
margin/left = 80.0
margin/top = 190.0
margin/right = 240.0
margin/bottom = 230.0
custom_styles/hover = SubResource( 9 )
custom_styles/pressed = SubResource( 10 )
custom_styles/disabled = SubResource( 9 )
custom_styles/normal = SubResource( 9 )
custom_fonts/font = ExtResource( 4 )
custom_colors/font_color_disabled = Color( 0.784314, 0.784314, 0.784314, 1 )
custom_colors/font_color = Color( 0.784314, 0.784314, 0.784314, 1 )
custom_colors/font_color_pressed = Color( 0.588235, 0.588235, 0.588235, 1 )
disabled = true
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
text = "Leave"
flat = false

[node name="fade" type="Sprite" parent="."]

transform/scale = Vector2( 320, 240 )
texture = ExtResource( 9 )
centered = false
modulate = Color( 0, 0, 0, 1 )

[connection signal="finished" from="Anims/Enter" to="." method="_on_AnimationPlayer_finished"]

[connection signal="finished" from="Anims/Falling1" to="." method="Falling1_start"]

[connection signal="finished" from="Anims/Falling2" to="." method="Falling2_start"]

[connection signal="finished" from="Anims/Falling3" to="." method="Falling3_start"]

[connection signal="pressed" from="Buttons/music" to="." method="set_music"]

[connection signal="pressed" from="Buttons/play" to="." method="play"]

[connection signal="pressed" from="Buttons/credits" to="." method="show_credits"]

[connection signal="pressed" from="Buttons/exit" to="." method="quit"]

[connection signal="pressed" from="Buttons/leave" to="." method="hide_credits"]


